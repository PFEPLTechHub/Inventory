<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Approve Send Form</title>
    <link rel="stylesheet" href="../static/CSS/approvesend.css">
    <link rel="stylesheet" href="../static/CSS/floating.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>
    <div class="my-container">
        <div class="my-container-header">
            <button id="back-button" class="back-button" type="button" data-target="../pages/pendingapprovaltable.html">&lt;</button>
            <div class="page-name">
                <h2>APPROVE SEND ITEMS FORM</h2>
            </div>
            <div class="company-logo">
                <img src="../static/Images/logo.png" alt="PFEPL Logo" width="85" height="85">
            </div>
        </div>

        <div class="container">
            <table class="table table-striped">
                <tbody>
                    <tr>
                        <th>Form NO.</th>
                        <td id="formNo"></td>
                        <th>EWAY Bill No  </th>
                        <td> - </td>
                       
                    </tr>
                    <tr>
                        <th>Initiation Date</th>
                        <td id="InitiationDate"></td>
                        <th>Completion Date </th>
                        <td> - </td>
                        
                    </tr>
                    <tr>
                        <th>Source</th>
                        <td id="Source"></td>
                        <th>Destination</th>
                        <td id="Destination"></td>
                        
                    </tr>
                    <tr>
                        <th>Sender</th>
                        <td id="Sender"></td>
                        <th>Receiver</th>
                        <td id="Receiver"></td>
                    </tr>
                    <tr>
                        <th>Sender Managaer</th>
                        <td id="Sender-manager"></td>
                        <th>Receiver Managaer</th>
                        <td id="Receiver-manager"></td>
                    </tr>
                </tbody>
            </table>

            <table class="table table-striped mt-3" id="mainTable">
                <thead>
                    <tr>
                        <th>Serial No</th>
                        <th>Set</th>
                        <th>Category</th>
                        <th>Name</th>
                        <th>Make</th>
                        <th>Model</th>
                        <th>ProductSerial </th>
                        <th>Condition (Sender)</th>
                        <th>Remarks (Sender)</th>
                        <th>Image (Sender)</th>
                        <th>Condition (Receiver)</th>
                        <th>Remarks (Receiver)</th>
                        <th>Image (Receiver)</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Rows will be inserted here -->
                </tbody>
            </table>
        </div>

        <div class="my-container-footer">
            <div class="my-container-footer-top" >
                <p id="forewaybill">ENTER E-WAY BILL NO:</p>
                <input type="text" id="ewaybill" name="ewaybill" minlength="12" maxlength="12">
                <div id="remarksContainer">
                    <p id="forewaybill" class="mx-3">Disapprove Remark:</p>
                    <input type="text" id="disapproveremarks" name="disapproveremarks" >
                </div>
                <div id="nobillremarksContainer">
                    <p id="foremptyewaybill" class="mx-3">Reason for no ewaybill:</p>
                    <input type="text" id="emptyewaybill" name="emptyewaybill" >
                </div>
            </div>
           
            <div class="my-container-footer-button">
                <button id="approvalButton" type="button">GIVE APPROVAL TO SEND</button>
                <button class="disapproval-button" id="ewaybillbutton">EWAYBILL</button>
                <button class="disapproval-button" id="disapproveButton">DISAPPROVE TRANSACTION</button>
            </div>
        </div>
    </div>

    <div id="floatingBox">
        <!-- Content of the floating box -->
        <span id="messageText"></span>
        <button id="okButton"><span>OK</span></button>

    </div>

    <script src="../static/JS/approvesend.js"></script>
    <script src="../static/JS/floating.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
        var ewaybillUrl = "{{ url_for('page_routes.ewaybill') }}";

        const ewaybillbutton = document.getElementById("ewaybillbutton");
    if (ewaybillbutton) {
        ewaybillbutton.addEventListener("click", function() {
            const currentUrl = window.location.href;
            const urlParts = currentUrl.split('/');
            const transactionUid = urlParts[urlParts.length - 1];
            window.location.href = ewaybillUrl + '/' + transactionUid;
        });
    }
</script>
</body>

</html>
